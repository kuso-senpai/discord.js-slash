'use strict';


const SlashCommand = require("../structures/SlashCommand")

class SlashGuildCommand extends SlashCommand {
    constructor(client, guild, name, description, options = undefined, data = undefined, onCall) {
        super(client, name.toLowerCase().replace(/ /g, "_"), description, options, data, onCall)

        this.guildID = guild.id ? guild.id : guild
    }
    register = async() => {
        return new Promise(async resolve => {
            let commandData = {
                name: String(this.name),
                description: String(this.description),
                options: this.options
            }

            this._patch(this.client.api.applications(this.client.user.id).guilds(this.guildID).commands.post({data: commandData}))
            this.client.slashCommands.add(this)
            resolve()
        })
    }
    delete = () => {
        return new Promise(async (resolve, reject) => {
            await client.api.applications(this.client.user.id).guilds(this.guildID).commands(this.id).delete()
            resolve()
        })
    }

}


module.exports = SlashGuildCommand
